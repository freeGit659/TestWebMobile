window.__require=function t(n,i,e){function o(r,a){if(!i[r]){if(!n[r]){var f=r.split("/");if(f=f[f.length-1],!n[f]){var c="function"==typeof __require&&__require;if(!a&&c)return c(f,!0);if(s)return s(f,!0);throw new Error("Cannot find module '"+r+"'")}}var u=i[r]={exports:{}};n[r][0].call(u.exports,function(t){return o(n[r][1][t]||t)},u,u.exports,t,n,i,e)}return i[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<e.length;r++)o(e[r]);return o}({1:[function(t,n,i){(function(t,e){"object"==typeof i&&"object"==typeof n?n.exports=e():"function"==typeof define&&define.amd?define("StateMachine",[],e):"object"==typeof i?i.StateMachine=e():t.StateMachine=e()})(this,function(){return function(t){var n={};function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=n,i.i=function(t){return t},i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="",i(i.s=5)}([function(t,n,i){"use strict";t.exports=function(t,n){var i,e,o;for(i=1;i<arguments.length;i++)for(o in e=arguments[i])e.hasOwnProperty(o)&&(t[o]=e[o]);return t}},function(t,n,i){"use strict";var e=i(0);t.exports={build:function(t,n){var i,o,s,r=n.plugins;for(i=0,o=r.length;i<o;i++)(s=r[i]).methods&&e(t,s.methods),s.properties&&Object.defineProperties(t,s.properties)},hook:function(t,n,i){var e,o,s,r,a=t.config.plugins,f=[t.context];for(i&&(f=f.concat(i)),e=0,o=a.length;e<o;e++)r=a[e],(s=a[e][n])&&s.apply(r,f)}}},function(t,n,i){"use strict";function e(t){if(0===t.length)return t;var n,i,e=t.split(/[_-]/);if(1===e.length&&e[0][0].toLowerCase()===e[0][0])return t;for(i=e[0].toLowerCase(),n=1;n<e.length;n++)i=i+e[n].charAt(0).toUpperCase()+e[n].substring(1).toLowerCase();return i}e.prepended=function(t,n){return t+(n=e(n))[0].toUpperCase()+n.substring(1)},t.exports=e},function(t,n,i){"use strict";var e=i(0),o=i(2);function s(t,n){t=t||{},this.options=t,this.defaults=n.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(t.init),this.data=this.configureData(t.data),this.methods=this.configureMethods(t.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(t.transitions||[]),this.plugins=this.configurePlugins(t.plugins,n.plugin)}e(s.prototype,{addState:function(t){this.map[t]||(this.states.push(t),this.addStateLifecycleNames(t),this.map[t]={})},addStateLifecycleNames:function(t){this.lifecycle.onEnter[t]=o.prepended("onEnter",t),this.lifecycle.onLeave[t]=o.prepended("onLeave",t),this.lifecycle.on[t]=o.prepended("on",t)},addTransition:function(t){this.transitions.indexOf(t)<0&&(this.transitions.push(t),this.addTransitionLifecycleNames(t))},addTransitionLifecycleNames:function(t){this.lifecycle.onBefore[t]=o.prepended("onBefore",t),this.lifecycle.onAfter[t]=o.prepended("onAfter",t),this.lifecycle.on[t]=o.prepended("on",t)},mapTransition:function(t){var n=t.name,i=t.from,e=t.to;return this.addState(i),"function"!=typeof e&&this.addState(e),this.addTransition(n),this.map[i][n]=t,t},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(t){return"string"==typeof t?this.mapTransition(e({},this.defaults.init,{to:t,active:!0})):"object"==typeof t?this.mapTransition(e({},this.defaults.init,t,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(t){return"function"==typeof t?t:"object"==typeof t?function(){return t}:function(){return{}}},configureMethods:function(t){return t||{}},configurePlugins:function(t,n){var i,e,o;for(i=0,e=(t=t||[]).length;i<e;i++)"function"==typeof(o=t[i])&&(t[i]=o=o()),o.configure&&o.configure(this);return t},configureTransitions:function(t){var n,i,e,o,s,r=this.defaults.wildcard;for(i=0;i<t.length;i++)for(e=t[i],o=Array.isArray(e.from)?e.from:[e.from||r],s=e.to||r,n=0;n<o.length;n++)this.mapTransition({name:e.name,from:o[n],to:s})},transitionFor:function(t,n){var i=this.defaults.wildcard;return this.map[t][n]||this.map[i][n]},transitionsFor:function(t){var n=this.defaults.wildcard;return Object.keys(this.map[t]).concat(Object.keys(this.map[n]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),t.exports=s},function(t,n,i){var e=i(0),o=i(6),s=i(1),r=[null,[]];function a(t,n){this.context=t,this.config=n,this.state=n.init.from,this.observers=[t]}e(a.prototype,{init:function(t){if(e(this.context,this.config.data.apply(this.context,t)),s.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(t){return Array.isArray(t)?t.indexOf(this.state)>=0:this.state===t},isPending:function(){return this.pending},can:function(t){return!this.isPending()&&!!this.seek(t)},cannot:function(t){return!this.can(t)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(t,n){var i=this.config.defaults.wildcard,e=this.config.transitionFor(this.state,t),o=e&&e.to;return"function"==typeof o?o.apply(this.context,n):o===i?this.state:o},fire:function(t,n){return this.transit(t,this.state,this.seek(t,n),n)},transit:function(t,n,i,e){var o=this.config.lifecycle,s=this.config.options.observeUnchangedState||n!==i;return i?this.isPending()?this.context.onPendingTransition(t,n,i):(this.config.addState(i),this.beginTransit(),e.unshift({transition:t,from:n,to:i,fsm:this.context}),this.observeEvents([this.observersForEvent(o.onBefore.transition),this.observersForEvent(o.onBefore[t]),s?this.observersForEvent(o.onLeave.state):r,s?this.observersForEvent(o.onLeave[n]):r,this.observersForEvent(o.on.transition),s?["doTransit",[this]]:r,s?this.observersForEvent(o.onEnter.state):r,s?this.observersForEvent(o.onEnter[i]):r,s?this.observersForEvent(o.on[i]):r,this.observersForEvent(o.onAfter.transition),this.observersForEvent(o.onAfter[t]),this.observersForEvent(o.on[t])],e)):this.context.onInvalidTransition(t,n,i)},beginTransit:function(){this.pending=!0},endTransit:function(t){return this.pending=!1,t},failTransit:function(t){throw this.pending=!1,t},doTransit:function(t){this.state=t.to},observe:function(t){if(2===t.length){var n={};n[t[0]]=t[1],this.observers.push(n)}else this.observers.push(t[0])},observersForEvent:function(t){for(var n,i=0,e=this.observers.length,o=[];i<e;i++)(n=this.observers[i])[t]&&o.push(n);return[t,o,!0]},observeEvents:function(t,n,i,e){if(0===t.length)return this.endTransit(void 0===e||e);var o=t[0][0],r=t[0][1],a=t[0][2];if(n[0].event=o,o&&a&&o!==i&&s.hook(this,"lifecycle",n),0===r.length)return t.shift(),this.observeEvents(t,n,o,e);var f=r.shift(),c=f[o].apply(f,n);return c&&"function"==typeof c.then?c.then(this.observeEvents.bind(this,t,n,o)).catch(this.failTransit.bind(this)):!1===c?this.endTransit(!1):this.observeEvents(t,n,o,c)},onInvalidTransition:function(t,n,i){throw new o("transition is invalid in current state",t,n,i,this.state)},onPendingTransition:function(t,n,i){throw new o("transition is invalid while previous transition is still in progress",t,n,i,this.state)}}),t.exports=a},function(t,n,i){"use strict";var e=i(0),o=i(2),s=i(1),r=i(3),a=i(4),f={is:function(t){return this._fsm.is(t)},can:function(t){return this._fsm.can(t)},cannot:function(t){return this._fsm.cannot(t)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(t,n,i){return this._fsm.onInvalidTransition(t,n,i)},onPendingTransition:function(t,n,i){return this._fsm.onPendingTransition(t,n,i)}},c={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(t){throw Error("use transitions to change state")}}};function u(t){return h(this||{},t)}function h(t,n){return l(t,new r(n,u)),t._fsm(),t}function l(t,n){if("object"!=typeof t||Array.isArray(t))throw Error("StateMachine can only be applied to objects");s.build(t,n),Object.defineProperties(t,c),e(t,f),e(t,n.methods),n.allTransitions().forEach(function(n){t[o(n)]=function(){return this._fsm.fire(n,[].slice.call(arguments))}}),t._fsm=function(){this._fsm=new a(this,n),this._fsm.init(arguments)}}u.version="3.0.1",u.factory=function(){var t,n;"function"==typeof arguments[0]?(t=arguments[0],n=arguments[1]||{}):(t=function(){this._fsm.apply(this,arguments)},n=arguments[0]||{});var i=new r(n,u);return l(t.prototype,i),t.prototype._fsm.config=i,t},u.apply=h,u.defaults={wildcard:"*",init:{name:"init",from:"none"}},t.exports=u},function(t,n,i){"use strict";t.exports=function(t,n,i,e,o){this.message=t,this.transition=n,this.from=i,this.to=e,this.current=o}}])})},{}],NewScript:[function(t,n,i){"use strict";cc._RF.push(n,"2a16aBBqJNAoq+4G26TiLd8","NewScript");var e=t("javascript-state-machine"),o="Red",s="Green",r="Yellow";cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._onToYellow=this.onToYellow.bind(this),this._onToRed=this.onToRed.bind(this),this._onToGreen=this.onToGreen.bind(this),this.fsm=new e({init:"init",transitions:[{name:"toYellow",from:s,to:r},{name:"toRed",from:r,to:o},{name:"toGreen",from:o,to:s}],methods:{onToYellow:this._onToYellow,onToRed:this._onToRed,onToGreen:this._onToGreen}})},start:function(){this.fsm.toYellow()},onToYellow:function(){cc.log("yellow")},onToRed:function(){cc.log("red")},onToGreen:function(){cc.log("green")}}),cc._RF.pop()},{"javascript-state-machine":1}]},{},["NewScript"]);